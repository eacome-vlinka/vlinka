---
interface Category {
  id: string;
  name: string;
}

interface Props {
  categories: Category[];
  activeCategory?: string;
  allLabel: string;
}

const { categories, activeCategory = 'all', allLabel } = Astro.props;
---

<div class="category-nav">
  <button
    class={`category-tab ${activeCategory === 'all' ? 'active' : ''}`}
    data-category="all"
  >
    {allLabel}
  </button>
  {categories.map((cat) => (
    <button
      class={`category-tab ${activeCategory === cat.id ? 'active' : ''}`}
      data-category={cat.id}
    >
      {cat.name}
    </button>
  ))}
</div>

<style>
  .category-nav {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5em;
    padding: 1em 0;
  }

  .category-tab {
    padding: 0.6em 1.2em;
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
    background-color: var(--color-white);
    font-family: 'Manrope', sans-serif;
    font-size: 0.85em;
    font-weight: 500;
    color: var(--color-text);
    cursor: pointer;
    transition: all var(--animation-primary);
  }

  .category-tab:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
  }

  .category-tab.active {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--color-white);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const tabs = document.querySelectorAll('.category-tab');
    const cards = document.querySelectorAll('.product-card');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const category = tab.getAttribute('data-category');

        // Update active tab
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        // Filter cards
        cards.forEach(card => {
          const cardCategory = card.getAttribute('data-category');
          if (category === 'all' || cardCategory === category) {
            (card as HTMLElement).style.display = 'flex';
          } else {
            (card as HTMLElement).style.display = 'none';
          }
        });
      });
    });
  });
</script>
